<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pong with Character Selection</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background: black;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        flex-direction: column;
      }

      canvas {
        background: black;
        display: block;
        margin-top: 10px;
      }

      #selection {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }

      .character {
        margin: 10px;
        cursor: pointer;
        border: 3px solid transparent;
        border-radius: 8px;
        transition: border 0.3s;
        text-align: center;
      }

      .character:hover {
        border: 3px solid white;
      }

      .character img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
      }

      .selected {
        border: 3px solid limegreen;
      }

      #startBtn {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        display: none;
      }

      #timer {
        font-size: 24px;
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="selection">
      <h2>Select Player 1:</h2>
      <div id="player1" class="select-grid"></div>
      <h2>Select Player 2:</h2>
      <div id="player2" class="select-grid"></div>
    </div>
    <div id="timer">Game starts in <span id="countdown">3</span>...</div>
    <canvas id="gameCanvas" width="800" height="600" style="display: none"></canvas>
    <button id="startBtn">Start Game</button>

    <script>
      const people = [
        {
          name: "Jake",
          image:
            "https://media.licdn.com/dms/image/v2/D5603AQF2Mxo__hFuTg/profile-displayphoto-crop_800_800/B56ZfQ6OpZGoAM-/0/1751556616198?e=1756339200&v=beta&t=aaUQKnSfBrEq41ob6ob-73v1QikQhEjUCF97WKgPdII",
        },
        {
          name: "Josh",
          image:
            "https://media.licdn.com/dms/image/v2/C4D03AQHSMPD32qcL-Q/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1594858007083?e=1756339200&v=beta&t=NIgiF2IyBWQ-qd_ou059jr9E3sPk7-qD3s3wDQBU6xg",
        },
        {
          name: "Vinnie",
          image:
            "https://media.licdn.com/dms/image/v2/D5622AQEc-uaGSu04rw/feedshare-shrink_800/feedshare-shrink_800/0/1696256836883?e=2147483647&v=beta&t=8vkbVL0fN-gueUl9qTJJxrPe8kWL3VWpXxHblL6HUz8",
        },
        {
          name: "Brant",
          image:
            "https://indd.adobe.com/content/2/deac4233-e2bf-459d-8226-c74c87d55e01/3505012381138/package/c94p/publication-web-resources/image/419.png",
        },
        {
          name: "Hari",
          image:
            "https://media.licdn.com/dms/image/v2/D5603AQGSRDQImRvW5w/profile-displayphoto-shrink_800_800/B56ZbqCEe7GgAg-/0/1747683133712?e=1756339200&v=beta&t=217hEGIBBxkU1KpQ4cBvpXX_Fy3E8EZzjg6bIUp15kI",
        },
        {
          name: "Devin(RIP)",
          image:
            "https://media.licdn.com/dms/image/v2/D5635AQGMeUiACOKbkw/profile-framedphoto-shrink_200_200/B56Zf7zCOaG0AY-/0/1752276149430?e=1754319600&v=beta&t=_WNsyO0VbPKhYypaYbHHMy-3vbFNk863KjfcIjBb6Dw",
        },
        {
          name: "Brian",
          image:
            "https://indd.adobe.com/content/2/deac4233-e2bf-459d-8226-c74c87d55e01/3505012381138/package/c94p/publication-web-resources/image/169.png",
        },
      ];

      const player1Div = document.getElementById("player1");
      const player2Div = document.getElementById("player2");
      let selected1 = null;
      let selected2 = null;

      people.forEach((person, index) => {
        const div1 = createCharacterDiv(person, () => {
          selected1 = person;
          updateSelection("player1", selected1);
          showStartIfReady();
        });

        const div2 = createCharacterDiv(person, () => {
          selected2 = person;
          updateSelection("player2", selected2);
          showStartIfReady();
        });

        player1Div.appendChild(div1);
        player2Div.appendChild(div2);
      });

      function createCharacterDiv(person, onClick) {
        const div = document.createElement("div");
        div.className = "character";
        div.innerHTML = `<img src="${person.image}" /><br>${person.name}`;
        div.onclick = () => {
          onClick();
        };
        return div;
      }

      function updateSelection(containerId, selected) {
        const container = document.getElementById(containerId);
        Array.from(container.children).forEach((child) =>
          child.classList.remove("selected")
        );
        Array.from(container.children).forEach((child) => {
          if (child.innerText === selected.name) {
            child.classList.add("selected");
          }
        });
      }

      function showStartIfReady() {
        if (selected1 && selected2 && selected1.name !== selected2.name) {
          document.getElementById("startBtn").style.display = "block";
        }
      }

      document.getElementById("startBtn").onclick = () => {
        document.getElementById("selection").style.display = "none";
        document.getElementById("startBtn").style.display = "none";
        document.getElementById("timer").style.display = "block";

        let countdown = 3;
        const countdownSpan = document.getElementById("countdown");
        const interval = setInterval(() => {
          countdown--;
          countdownSpan.textContent = countdown;
          if (countdown === 0) {
            clearInterval(interval);
            document.getElementById("timer").style.display = "none";
            startGame();
          }
        }, 1000);
      };

      function startGame() {
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.style.display = "block";

        let paddleHeight = 100;
        let paddleWidth = 10;
        let paddleSpeed = 10;
        let ballSize = 10;
        let ballX = canvas.width / 2;
        let ballY = canvas.height / 2;
        let ballSpeedX = 5;
        let ballSpeedY = 5;

        let leftPaddleY = canvas.height / 2 - paddleHeight / 2;
        let rightPaddleY = canvas.height / 2 - paddleHeight / 2;

        let keys = {};

        document.addEventListener("keydown", (e) => {
          keys[e.key] = true;
        });

        document.addEventListener("keyup", (e) => {
          keys[e.key] = false;
        });

        function update() {
          if (keys["w"] && leftPaddleY > 0) leftPaddleY -= paddleSpeed;
          if (keys["s"] && leftPaddleY < canvas.height - paddleHeight)
            leftPaddleY += paddleSpeed;
          if (keys["ArrowUp"] && rightPaddleY > 0) rightPaddleY -= paddleSpeed;
          if (
            keys["ArrowDown"] &&
            rightPaddleY < canvas.height - paddleHeight
          )
            rightPaddleY += paddleSpeed;

          ballX += ballSpeedX;
          ballY += ballSpeedY;

          // Wall collision
          if (ballY <= 0 || ballY >= canvas.height - ballSize)
            ballSpeedY = -ballSpeedY;

          // Paddle collisions
          if (
            ballX <= paddleWidth &&
            ballY > leftPaddleY &&
            ballY < leftPaddleY + paddleHeight
          ) {
            ballSpeedX = -ballSpeedX * 1.05;
          }

          if (
            ballX >= canvas.width - paddleWidth - ballSize &&
            ballY > rightPaddleY &&
            ballY < rightPaddleY + paddleHeight
          ) {
            ballSpeedX = -ballSpeedX * 1.05;
          }

          // Reset if out of bounds
          if (ballX < 0 || ballX > canvas.width) {
            ballX = canvas.width / 2;
            ballY = canvas.height / 2;
            ballSpeedX = 5 * (Math.random() > 0.5 ? 1 : -1);
            ballSpeedY = 5 * (Math.random() > 0.5 ? 1 : -1);
          }
        }

        function draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // Paddles
          ctx.fillStyle = "white";
          ctx.fillRect(0, leftPaddleY, paddleWidth, paddleHeight);
          ctx.fillRect(
            canvas.width - paddleWidth,
            rightPaddleY,
            paddleWidth,
            paddleHeight
          );

          // Ball
          ctx.fillRect(ballX, ballY, ballSize, ballSize);
        }

        function gameLoop() {
          update();
          draw();
          requestAnimationFrame(gameLoop);
        }

        gameLoop();
      }
    </script>
  </body>
</html>
