<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pong Game with Character Select</title>
    <style>
      body {
        margin: 0;
        background-color: black;
        overflow: hidden;
        font-family: sans-serif;
      }
      #character-select {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #111;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }
      #character-options {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
      }
      .character {
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
      }
      .character img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
      }
      canvas {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="character-select">
      <h2>Select Your Character</h2>
      <div id="character-options"></div>
    </div>

    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
      const people = [
        {
          name: "Jake",
          image:
            "https://media.licdn.com/dms/image/v2/D5603AQF2Mxo__hFuTg/profile-displayphoto-crop_800_800/B56ZfQ6OpZGoAM-/0/1751556616198?e=1756339200&v=beta&t=aaUQKnSfBrEq41ob6ob-73v1QikQhEjUCF97WKgPdII",
        },
        {
          name: "Josh",
          image:
            "https://media.licdn.com/dms/image/v2/C4D03AQHSMPD32qcL-Q/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1594858007083?e=1756339200&v=beta&t=NIgiF2IyBWQ-qd_ou059jr9E3sPk7-qD3s3wDQBU6xg",
        },
        {
          name: "Vinnie",
          image:
            "https://media.licdn.com/dms/image/v2/D5622AQEc-uaGSu04rw/feedshare-shrink_800/feedshare-shrink_800/0/1696256836883?e=2147483647&v=beta&t=8vkbVL0fN-gueUl9qTJJxrPe8kWL3VWpXxHblL6HUz8",
        },
        {
          name: "Brant",
          image:
            "https://indd.adobe.com/content/2/deac4233-e2bf-459d-8226-c74c87d55e01/3505012381138/package/cover.jpeg",
        },
      ];

      const selectDiv = document.getElementById("character-select");
      const optionsDiv = document.getElementById("character-options");
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      let selectedPerson = null;

      people.forEach((person, index) => {
        const charDiv = document.createElement("div");
        charDiv.className = "character";
        charDiv.innerHTML = `<img src="${person.image}" alt="${person.name}" /><span>${person.name}</span>`;
        charDiv.onclick = () => startGame(index);
        optionsDiv.appendChild(charDiv);
      });

      function startGame(index) {
        selectedPerson = people[index];
        selectDiv.style.display = "none";
        canvas.style.display = "block";

        setTimeout(() => {
          initGame();
        }, 3000); // 3-second timer before game starts
      }

      // Game logic
      let paddleWidth = 10,
        paddleHeight = 100,
        playerY = 250,
        aiY = 250,
        ballX = 400,
        ballY = 300,
        ballVX = 5,
        ballVY = 5,
        paddleSpeed = 6;

      function initGame() {
        requestAnimationFrame(gameLoop);
      }

      function gameLoop() {
        update();
        draw();
        requestAnimationFrame(gameLoop);
      }

      function update() {
        // Move ball
        ballX += ballVX;
        ballY += ballVY;

        // Bounce top and bottom
        if (ballY <= 0 || ballY >= canvas.height) ballVY *= -1;

        // Bounce off paddles and speed up slightly
        if (
          ballX <= paddleWidth &&
          ballY >= playerY &&
          ballY <= playerY + paddleHeight
        ) {
          ballVX *= -1.05;
        }

        if (
          ballX >= canvas.width - paddleWidth &&
          ballY >= aiY &&
          ballY <= aiY + paddleHeight
        ) {
          ballVX *= -1.05;
        }

        // Reset if ball goes out
        if (ballX < 0 || ballX > canvas.width) {
          ballX = 400;
          ballY = 300;
          ballVX = 5 * (Math.random() > 0.5 ? 1 : -1);
          ballVY = 5;
        }

        // AI movement
        if (aiY + paddleHeight / 2 < ballY) aiY += paddleSpeed;
        else aiY -= paddleSpeed;

        // Player controls
        if (keys["ArrowUp"] && playerY > 0) playerY -= paddleSpeed;
        if (keys["ArrowDown"] && playerY + paddleHeight < canvas.height)
          playerY += paddleSpeed;
      }

      function draw() {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Draw paddles
        ctx.fillStyle = "white";
        ctx.fillRect(0, playerY, paddleWidth, paddleHeight);
        ctx.fillRect(canvas.width - paddleWidth, aiY, paddleWidth, paddleHeight);

        // Draw ball
        ctx.beginPath();
        ctx.arc(ballX, ballY, 10, 0, Math.PI * 2);
        ctx.fill();

        // Draw selected character
        if (selectedPerson) {
          const img = new Image();
          img.src = selectedPerson.image;
          img.onload = () => {
            ctx.drawImage(img, 10, 10, 50, 50);
            ctx.fillStyle = "white";
            ctx.fillText(selectedPerson.name, 10, 75);
          };
        }
      }

      let keys = {};
      document.addEventListener("keydown", (e) => (keys[e.key] = true));
      document.addEventListener("keyup", (e) => (keys[e.key] = false));
    </script>
  </body>
</html>
